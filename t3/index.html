<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <title>Hindamisvorm - t3</title>
    <link rel="stylesheet" href="css/bootstrap.min.css" />
    <link rel="stylesheet" href="css/tagsinput.css" />
    <link rel="stylesheet" href="css/typeaheadjs.css" />
    <link rel="stylesheet" href="fonts/material-icons.css" />
    <link rel="stylesheet" href="css/style.css" />
  </head>
  <body class="d-none">
    <main id="app" role="main" class="container">
      <div class="row">
        <div class="col">
          <h1 class="mb-4 pb-2">Hindamisvorm</h1>
        </div>
      </div>
      <div class="row">
        <div class="col-lg">
          <h2>Üldinfo</h2>
          <p>
            Hindamisel:<br/>
            <strong class="lead">Kodutöö 2 - Bürokraatia (mäng)</strong>
          </p>
          <label for="homeworkUrl">
            Kodutöö URL:
          </label>
          <input type="url" id="homeworkUrl" class="form-control" />
          <small class="form-text text-success mb-2">Plagiaati ei tuvastatud.</small>
          <label for="students">
            Üliõpilased (kuni 2):
          </label>
          <input type="text" id="students" class="form-control" />
          <div class="row mt-4">
            <div class="col">
              <label>Tähtaeg</label>
              <p class="lead">11. aprill, 2018</p>
            </div>
            <div class="col">
              <label>Hilinemine</label>
              <p class="lead">14 päeva (<points-label :points="dueDatePointsPenalty" suffix="p"></points-label>)</p>
            </div>
          </div>
          <h3 class="mb-3">Varasemad esitamised</h3>
          <table class="table table-striped">
            <tr>
              <th>Kuupäev</th>
              <th class="text-center">Punktid</th>
              <th class="text-center">Vaata</th>
            </tr>
            <tr>
              <td>18. aprill 2018</td>
              <td class="text-center"><span class="text-success">12</span></td>
              <td class="text-center"><a href="#"><i class="material-icons">search</i></a></td>
            </tr>
            <tr>
              <td>11. aprill 2018</td>
              <td class="text-center"><span class="text-danger">8</span></td>
              <td class="text-center"><a href="#"><i class="material-icons">search</i></a></td>
            </tr>
          </table>
        </div>
        <div class="col-lg">
          <h2>Baaspunktid <points-label :points="numBasePoints"></points-label></h2>
          <p>10 punkti, kui kõik on lahendatud</p>
          <template v-for="factor in basePointsFactors">
            <label>
              <input type="checkbox" v-model="selectedBasePointsFactors" :value="factor" />
              {{ factor }}
              <a href="#" class="btn btn-sm ml-2"
                  :class="{ 'btn-primary': factorNotes[factor], 'btn-success add-note': !factorNotes[factor] }"
                  data-toggle="modal" data-target="#factorNoteModal"
                  @click="onNoteButton(factor)">
                <i v-if="factorNotes[factor]" class="material-icons">description</i>
                <i v-else class="material-icons">note_add</i>
              </a>
            </label>
            <br/>
          </template>
          <template v-if="numBasePointsFactors < 6">
            <hr/>
            <div class="alert alert-warning">
              <template v-if="numBasePointsFactors == 5">
                <strong>Üks</strong> baaspunkt
              </template>
              <template v-else-if="numBasePointsFactors == 4">
                <strong>Kaks</strong> baaspunkti
              </template>
              <template v-else>
                <strong>{{ 6 - numBasePointsFactors }}</strong> baaspunkti
              </template>
              on puudu.
            </div>
          </template>
          <template v-if="numBasePointsFactors == 4 || numBasePointsFactors == 5">
            <label>
              <input type="radio" name="grace" v-model.number="gracePoints" value="0">
              Ära loe lahendatuks
            </label>
            <br/>
            <label>
              <input type="radio" name="grace" v-model.number="gracePoints" value="5">
              Loe lahendatuks <span class="text-success font-weight-bold">+5</span> punkti eest
            </label>
            <br/>
            <label>
              <input type="radio" name="grace" v-model.number="gracePoints" value="10">
              Loe lahendatuks <span class="text-success font-weight-bold">+10</span> punkti eest
            </label>
          </template>
        </div>
        <div class="col-lg">
          <h2>Lisapunktid <points-label :points="numBonusPoints"></points-label></h2>
          <p>1 punkt igaühe eest</p>
          <template v-for="factor in bonusPointsFactors">
            <label>
              <input type="checkbox" v-model="selectedBonusPointsFactors" :value="factor" />
              {{ factor }}
              <a href="#" class="btn btn-sm ml-2"
                  :class="{ 'btn-primary': factorNotes[factor], 'btn-success add-note': !factorNotes[factor] }"
                  data-toggle="modal" data-target="#factorNoteModal"
                  @click="onNoteButton(factor)">
                <i v-if="factorNotes[factor]" class="material-icons">description</i>
                <i v-else class="material-icons">note_add</i>
              </a>
            </label>
            <br/>
          </template>
          <hr/>
          Täiendpunktid:
          <input type="number" class="form-control mb-2" v-model.number="additionalPoints" />
          Märkused:
          <textarea class="form-control"></textarea>
        </div>
      </div>
      <div id="footer" class="container pb-3 bg-white" style="width: 100%; position: fixed; bottom: 0px">
        <div class="row mt-3">
          <div class="col">
            <div class="progress mb-2">
              <div class="progress-bar" role="progressbar"
                  :class="{ 'bg-danger': numTotalPoints < 10, 'bg-success': numTotalPoints >= 10 }"
                  :style="{ width: pointsBarPercentage + '%' }"></div>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-2">
            <button class="btn btn-warning">
              Pikenda<span class="d-none d-md-inline"> tähtaega</span>
            </button>
          </div>
          <div class="col-8 text-center">
            <div class="total-points">
              <strong>{{ numTotalPoints }}</strong> / 20
            </div>
            <div class="min-points-notice"
                :class="{'text-danger': numTotalPoints < 10, 'text-success': numTotalPoints >= 10 }">
              Min 10p
            </div>
          </div>
          <div class="col-2">
            <button class="btn btn-success float-right" :disabled="!canSubmit">
              Kinnita
            </button>
          </div>
        </div>
      </div>

      <div class="modal fade" id="factorNoteModal" tabindex="-1" role="dialog" aria-labelledby="factorNoteModal" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="factorNoteModal">{{ currentNoteFactorName }}</h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Sulge">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
              <label>Märkused</label>
              <textarea class="form-control" rows="7" v-model="currentNote">
              </textarea>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-danger mr-auto"
                  id="delPopover"
                  data-toggle="popover"
                  title="Kindel?"
                  data-content="
                  <button class='btn btn-secondary'
                      onclick='$(&quot;#delPopover&quot;).popover(&quot;hide&quot;)'>
                    Loobu
                  </button>
                  <button class='btn btn-danger'
                      onclick='$(&quot;#factorNoteModal&quot;).modal(&quot;hide&quot;); vm.onNoteDeleteButton(event)'>
                    Jah
                  </button>">
                Kustuta
              </button>
              <button type="button" class="btn btn-secondary" data-dismiss="modal">Katkesta</button>
              <button type="button" class="btn btn-success" @click="onNoteSaveButton" data-dismiss="modal">Salvesta</button>
            </div>
          </div>
        </div>
      </div>
    </main>
    <script src="js/jquery-3.3.1.min.js"></script>
    <script src="js/typeahead.bundle.min.js"></script>
    <script src="js/tagsinput.js"></script>
    <script src="js/bootstrap.bundle.min.js"></script>
    <script src="js/vue.js"></script>
    <script src="js/main.js"></script>
  </body>
</html>
